#!/bin/bash
{{ if eq .profile "work" -}}
# Apply work-private dotfiles if they exist
WORK_DOTFILES_DIR="${HOME}/.local/share/chezmoi-work"

if [ -d "${WORK_DOTFILES_DIR}" ]; then
    echo "üîê Applying work-private dotfiles..."

    # Use the same chezmoi executable that's currently running
    CHEZMOI="{{ .chezmoi.executable }}"

    if [ -x "${CHEZMOI}" ]; then
        "${CHEZMOI}" apply --source="${WORK_DOTFILES_DIR}"
    else
        echo "‚ö†Ô∏è  chezmoi executable not found at ${CHEZMOI}"
        echo "   Skipping work-private dotfiles - run 'chezmoi apply --source=${WORK_DOTFILES_DIR}' manually"
    fi
fi
{{- end }}
